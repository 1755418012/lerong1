<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./assets/fonts/style.css">
</head>
<body>
    <div class="le_top">
        <div class="le_top_box">
            <a href="" class="logo_url">
                <img src="https://i3.letvimg.com/lc03_user/201905/21/11/21/155840875152248.png"/>
            </a>
            <ul class="regi_top_r f_fr">
                <li>è¯­è¨€ï¼šç®€ä½“ä¸­æ–‡</li>
                <li>|</li>
                <li>å›½å®¶/åœ°åŒºï¼šä¸­å›½</li>
                <li>|</li>
                <li>å¸®åŠ©</li>
            </ul>
        </div>
        <div class="login_box_backbg">
            <div class="regi_login_form_wrap">
                <div class="regi_login_form_box">
                    <div class="regi_login_form login_form">
                        <p class="part_top reg_top8">
                            <span class="top_title">æ³¨å†Œ</span>
                            <a href="#" class="blu bluHover">ç«‹å³ç™»å½•</a>
                        </p>
                        <p class="part_top2">
                            <span class="error" errorname="loginname"></span>
                        </p>
                        <div class="posi_box">
                            <ul class="regi_ul regi_login_ul">
                                <li class="regi_form_input">
                                    <i class="icon IconPeople">ğŸ“</i>
                                    <input type="text" placeholder="æ‰‹æœºå·" style="outline:none" class="user">
                                </li>
                                <li class="regi_form_input">
                                        <i class="icon IconPeople">ğŸ‘œ</i>
                                        <input type="password" placeholder="å¯†ç ï¼ˆ6-18ä½æ•°å­—ä¸å­—æ¯ï¼‰" style="outline:none" class="pass">
                                </li>
                                <li class="regi_form_input">
                                        <i class="icon IconPeople">ğŸ”‚</i>
                                        <input type="password" placeholder="é‡å¤å¯†ç " style="outline:none" class="repass">
                                </li>
                                <li class="regi_form_input">
                                        <i class="icon IconPeople">ğŸ°</i>
                                        <input type="text" placeholder="è¯·è¾“å…¥éªŒè¯ç ,ç‚¹å‡»åˆ‡æ¢" style="outline:none" id="ss" class="code">
                                        <span class="yzm" style="font-weight: bold;"></span>
                                </li>
                                <li class="regi_agree">
                                    <label for="">
                                        <input type="checkbox" checked="true">
                                        æˆ‘å·²é˜…è¯»å¹¶åŒæ„
                                        <a target="_blank" href="">ä¹è§†ç”¨æˆ·åè®®</a>
                                    </label>
                                </li>
                                <li class="reg">
                                    <a href="#" class="sub">æ³¨&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å†Œ</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</body>
<script src="./assets/jquery.js"></script>
<script src="./js/main.js"></script>
<script src="./assets/jquery.banner.1.3.js"></script>
<script src="./assets/ajax.js"></script>
<script src="./assets/jquery.cookie.js"></script>
<script>
    var t1=t2=t3=t4=false; 
    var user = document.querySelector(".user");
    var pass = document.querySelector(".pass");
    var repass = document.querySelector(".repass");
    var code = document.querySelector(".code");
    var tcode = document.querySelector(".yzm");
    var error = document.querySelector(".error");
    var sub = document.querySelector(".sub");
    user.onblur = function(){   //ç”¨æˆ·åçš„è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹çš„æ—¶å€™ï¼Œè¿›è¡Œåˆ¤æ–­
        var reg = /^1[3456789]\d{9}$/;  //æ‰‹æœºå·çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œ11ä½ï¼Œç¬¬ä¸€ä½æ˜¯1ï¼Œç¬¬äºŒä½æ˜¯[3456789]ä¸­çš„ä¸€ä¸ªï¼Œçº¯æ•°å­—
        var t=user.value;
        if(!reg.test(t)){
            // alert("è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·");
            $(".error").css({
                color:"#d31723",
            })
            error.innerHTML = "âš  è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·";
            user.value = "";
        }else{
            $(".error").css({
                color:"green",
            })
            error.innerHTML = "æ‰‹æœºå·è¾“å…¥æ­£ç¡®";
            t1 = true;  //è®¾ç½®æ­£ç¡®çš„è¯ï¼Œè®¾ç½®t1çš„å€¼ä¸ºtrue
        }
    }
    
    pass.onblur = function(){
        var reg = /^(?!([a-zA-Z]+|\d+)$)[a-zA-Z\d]{6,18}$/;
        var p = pass.value;
        if(!reg.test(p)){
            $(".error").css({
                color:"#d31723",
            })
            error.innerHTML = "âš  è¯·è¾“å…¥6-18ä½åŒ…å«æ•°å­—å’Œå­—æ¯çš„å¯†ç ";
            pass.value = "";
        }else{
            $(".error").css({
                color:"green",
            })
            error.innerHTML = "å¯†ç è®¾ç½®æ­£ç¡®";
            t2 = true;
        }
    }

    repass.onblur = function(){
        var rp = repass.value;
        var p = pass.value;
        if(rp!=p){
            $(".error").css({
                color:"#d31723",
            })
            error.innerHTML = "âš  é‡å¤å¯†ç é”™è¯¯";
            repass.value = "";
        }else if(p===""){   //è¿™é‡Œå¤šè¿›è¡Œä¸€ä¸ªè®¾ç½®çš„å¯†ç ä¸ºç©ºï¼Œå†ç‚¹å‡»é‡å¤å¯†ç ï¼Œå¤±å»ç„¦ç‚¹ååˆ¤æ–­çš„æƒ…å†µ
            $(".error").css({
                color:"#d31723",
            })
            error.innerHTML = "âš  é‡å¤å¯†ç é”™è¯¯";
            repass.value = "";
        }else{
            $(".error").css({
                color:"green",
            })
            error.innerHTML = "å¯†ç è®¾ç½®æˆåŠŸ";
            t3 = true;
        }
    }
    tcode.innerHTML = rs();
    tcode.onclick = function(){
        tcode.innerHTML = rs();
    }
    code.onblur = function(){
        var c = code.value;
        var tc = tcode.innerHTML;
        if(c!=tc){
            $(".error").css({
                color:"#d31723",
            })
            error.innerHTML = "âš  éªŒè¯ç è¾“å…¥é”™è¯¯";
            code.value = "";
            tcode.innerHTML = rs();
        }else{
            $(".error").css({
                color:"green",
            })
            error.innerHTML = "éªŒè¯ç æ­£ç¡®";
            t4 = true;
        }
    }
    sub.onclick = function(){
        //åªæœ‰å½“t1 t2 t3 t4å…¨éƒ¨ä¸ºtrueçš„æ—¶å€™æ‰ç®—æ³¨å†ŒæˆåŠŸï¼ˆå…¶å®è¿™é‡Œå¯ä»¥ä¸ç”¨åˆ¤æ–­ï¼Œå› ä¸ºå¦‚æœå‰é¢æœ‰ä¸€ä¸ªè¾“å…¥æ¡†è¾“å…¥ä¸ç¬¦åˆè¦æ±‚çš„è¯ï¼Œå¤±å»ç„¦ç‚¹åè¾“å…¥æ¡†çš„å€¼ä¼šè¢«æ¸…ç©ºï¼‰
        if(t1&&t2&&t3&&t4){     
            //æ³¨å†ŒæˆåŠŸåï¼Œå°†ç”¨æˆ·åå’Œå¯†ç å…¨éƒ¨å­˜åˆ°cookieä¸­ï¼Œå¯¹åº”çš„åç§°ä¸ºnameå’Œpass
            $.cookie("name",$(".user").val(),{expires:30});
            $.cookie("pass",$(".pass").val(),{expires:30});
            alert("æ³¨å†ŒæˆåŠŸ,è¯·ç™»å½•");
            window.location.href = "http://localhost:8081/login.html";  //æ³¨å†ŒæˆåŠŸï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
        }else{
            alert("è¯·æŒ‰è¦æ±‚é‡æ–°è¾“å…¥");
        }
    }
















    function rs() {
        var str = "";
        for(var i=0;i<4;i++){
            var num = random(0,9);
            var az = String.fromCharCode(random(97,122));
            var AZ = String. fromCharCode(random(65,90));

            str += str+num+az+AZ;
        }
        //å¼€å§‹çœŸæ­£çš„éšæœºæŠ½å–å››ä¸ª
        var stq = "";
        for(var j=0;j<4;j++){
            stq += str[random(0,str.length-1)]
        }
        return stq;
    }
    function random(a,b) {
        return Math.round(Math.random()*(a-b)+b);
    }

    
</script>
</html>
